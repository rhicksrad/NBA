<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="/NBA/" />
    <script src="assets/bdl-credentials.js"></script>
    <script type="module">
      import { ensureBdlKeyReady } from './assets/js/credentials.js';
      await ensureBdlKeyReady();
      window.__BDL_READY__ = true;
    </script>
    <link rel="icon" type="image/png" href="nba-logo-vector-01.png" />
    <link rel="stylesheet" href="styles/hub.css" />
    <title>Games Observatory | NBA Intelligence Hub</title>
  </head>
  <body>
    <div class="site-frame">
      <header class="site-header">
        <div class="hub-nav">
          <a class="brand" href="index.html">
            <img src="nba-logo-vector-01.png" alt="NBA logo" class="brand__logo" />
            <span class="brand__wordmark"><span class="brand__wordmark-accent">NBA</span> Intelligence Hub</span>
          </a>
          <nav class="nav-links">
            <a href="index.html">2025-2026 Preview</a>
            <a href="rewind.html">2024-2025 Season Rewind</a>
            <a href="players.html">Players</a>
            <a href="teams.html">Teams</a>
            <a class="active" href="games.html">Games</a>
            <a href="history.html">History</a>
            <a href="insights.html">Insights Lab</a>
            <a href="goat.html">GOAT Index</a>
            <a href="about.html">About</a>
          </nav>
        </div>
        <div class="hero hero--lab">
          <div class="hero__intro">
            <span class="eyebrow">Games Observatory</span>
            <h1>Scoreboard lab</h1>
            <p class="hero__lead">
              Tracking the 2025-26 buildup through our live games feed while keeping the 2024-25 finish as our reference
              point—the default slate spotlights the June 17, 2024 finale so every chart stays populated until the new campaign
              tips off.
            </p>
            <div class="games-toolbar">
              <label for="game-date-start">Game dates</label>
              <div class="games-toolbar__range">
                <input
                  id="game-date-start"
                  type="date"
                  name="game-date-start"
                  data-game-date-start
                  aria-label="Start date"
                />
                <span class="games-toolbar__separator" aria-hidden="true">to</span>
                <input
                  id="game-date-end"
                  type="date"
                  name="game-date-end"
                  data-game-date-end
                  aria-label="End date"
                />
              </div>
              <button type="button" class="games-toolbar__refresh" data-manual-refresh>
                Refresh now
              </button>
            </div>
          </div>
          <dl class="hero-metrics hero-metrics--lab">
            <div class="hero-metrics__item">
              <dt>Games tracked</dt>
              <dd>
                <span data-metric="games-total">—</span>
                <small>for <span data-selected-date>—</span></small>
              </dd>
            </div>
            <div class="hero-metrics__item">
              <dt>Live right now</dt>
              <dd>
                <span data-metric="live-count">—</span>
                <small>auto-pinging every 2½ minutes</small>
              </dd>
            </div>
            <div class="hero-metrics__item">
              <dt>Finals logged</dt>
              <dd>
                <span data-metric="final-count">—</span>
                <small>completed on the slate</small>
              </dd>
            </div>
            <div class="hero-metrics__item">
              <dt>Average final margin</dt>
              <dd>
                <span data-metric="avg-margin">—</span>
                <small data-metric="avg-detail">Awaiting results</small>
              </dd>
            </div>
            <div class="hero-metrics__item">
              <dt>Highest scoring output</dt>
              <dd>
                <span data-metric="top-total">—</span>
                <small data-metric="top-detail">No scores yet</small>
              </dd>
            </div>
          </dl>
        </div>
      </header>

      <main class="lab-content">
        <section class="lab-grid">
          <article class="lab-module lab-module--wide scoreboard-module">
            <header class="lab-module__header">
              <h2>Scoreboard pulse</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Powered by the live games feed</span>
                <span class="lab-chip lab-chip--accent" data-metric="scoreboard-summary">—</span>
              </div>
            </header>
            <div class="scoreboard-grid" data-scoreboard aria-live="polite"></div>
            <p class="lab-module__caption">
              Data syncs directly from the live games endpoint. Auto-refreshes every 2½ minutes when today's slate is
              active.
              <span class="games-caption-meta">Last update: <span data-refresh>—</span></span>
              <span class="games-caption-meta" data-fetch-state></span>
            </p>
          </article>

          <article class="lab-module" data-chart-wrapper>
            <header class="lab-module__header">
              <h2>Status mix</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Upcoming vs. live vs. finals</span>
              </div>
            </header>
            <div class="viz-canvas">
              <canvas id="status-breakdown" data-chart-ratio="0.76" aria-describedby="status-caption"></canvas>
            </div>
            <p id="status-caption" class="lab-module__caption">
              Doughnut slices show how the slate splits between unplayed, in-progress, and completed games.
            </p>
          </article>

          <article class="lab-module" data-chart-wrapper>
            <header class="lab-module__header">
              <h2>Tipoff cadence</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Games by local hour</span>
              </div>
            </header>
            <div class="viz-canvas">
              <canvas id="tipoff-curve" data-chart-ratio="0.62" aria-describedby="tipoff-caption"></canvas>
            </div>
            <p id="tipoff-caption" class="lab-module__caption">
              Line chart counts how many contests start in each local hour, highlighting the rhythm of the schedule.
            </p>
          </article>

          <article class="lab-module lab-module--wide" data-chart-wrapper>
            <header class="lab-module__header">
              <h2>Margin spread</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Absolute margin buckets</span>
                <span class="lab-chip lab-chip--accent" data-metric="margin-annotation">—</span>
              </div>
            </header>
            <div class="viz-canvas">
              <canvas id="margin-spread" data-chart-ratio="0.5" aria-describedby="margin-caption"></canvas>
            </div>
            <p id="margin-caption" class="lab-module__caption">
              Bars tally how frequently finals and live games land in each margin band so you can spot tight finishes at a glance.
            </p>
          </article>

          <article class="lab-module" data-chart-wrapper>
            <header class="lab-module__header">
              <h2>Single-game scoring leaders</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Team points</span>
              </div>
            </header>
            <div class="viz-canvas">
              <canvas id="scoring-leaders" data-chart-ratio="0.72" aria-describedby="leaders-caption"></canvas>
            </div>
            <p id="leaders-caption" class="lab-module__caption">
              Horizontal bars spotlight the loudest offensive performances logged on the selected slate.
            </p>
          </article>

          <article class="lab-module" data-chart-wrapper>
            <header class="lab-module__header">
              <h2>Score balance</h2>
              <div class="lab-module__meta">
                <span class="lab-chip">Visitor points vs. home points</span>
              </div>
            </header>
            <div class="viz-canvas">
              <canvas id="score-balance" data-chart-ratio="0.78" aria-describedby="balance-caption"></canvas>
            </div>
            <p id="balance-caption" class="lab-module__caption">
              Scatter plot pairs each game’s current score, revealing which matchups stay balanced and which tilt toward one side.
            </p>
          </article>
        </section>
      </main>

      <footer class="page-footer">Powered by the live games feed with a 2024-25 context lens.</footer>
    </div>

    <script src="vendor/chart.umd.js" defer></script>
    <script type="module" src="scripts/games.js"></script>
  </body>
</html>
