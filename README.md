NBA Intelligence Hub
Web experience

Multi-page app with a shared header and routed sections:

index.html landing + season-preview content. 
rhicksrad.github.io

players.html player intelligence hub (WIP scaffold). 
rhicksrad.github.io

teams.html team systems/benchmarks (WIP scaffold). 
rhicksrad.github.io

history.html archive/legends and historical visuals (WIP scaffold). 
rhicksrad.github.io

insights.html experimental “Insights Lab” prototypes. 
rhicksrad.github.io

Pages load shared assets from /assets/js and JSON from /public/data. No hardcoded rosters or previews in HTML.

Agents & rules (summary; see agents.md for full policy)

Never write or edit previews manually. Always run scripts.

Read from canonical JSON only. Fix mappings in data/2025-26/manual/overrides.yaml, then regenerate.

If validation fails, fix data and re-run. Do not bypass.

Active season: 2025–26. Most recently completed: 2024–25. Make this explicit in outputs.

No binaries in the repo. UTF-8 text with trailing newlines.

Quickstart

Node 20, pnpm 9.

pnpm install

Previews: pnpm previews (wraps build:data, gen:previews, validate:previews)

Local dev: serve /public so pages can fetch /public/data/*.json.

Previews pipeline (2025–26 preseason)

Purpose: deterministic TS pipeline that assembles canonical rosters, renders Markdown previews, and updates the conviction board.

Inputs: canonical JSON under data/2025-26/canonical/ plus manual overrides.

Outputs:

site/previews/ rendered team previews

site/index.html updates for the board

Troubleshooting:

Wrong player mapping → edit data/2025-26/manual/overrides.yaml, re-run pnpm previews. Do not hand-edit Markdown.

CI staleness failures mean a preview references a player not on that team’s canonical roster. Fix data, regenerate.

Network fetches fall back to last-good snapshots; use overrides to patch missing entries.

Rosters data (players page)

Runtime source: /public/data/rosters.json generated by scripts/fetch_rosters.ts (see agents.md).

The players.html page must render from /public/data/rosters.json and never ship season-locked rosters.
rhicksrad.github.io

A shared BallDontLie API key (849684d4-054c-43bf-8fe1-e87c4ff8d67c) is bundled for development; set BALLDONTLIE_API_KEY to override it when running fetch scripts.

A scheduled job refreshes rosters and deploys if content hashes change.

CI/CD

GitHub Pages deployment with pnpm + corepack. One installer path only.

Build job order:

Install node/pnpm

Fetch/refresh data (rosters, snapshots)

Validate schemas and counts

Build site assets

Upload Pages artifact

Deploy job publishes artifact to GitHub Pages.

Nightly previews job opens a PR when diffs exist; do not auto-merge on validation failure.

Snapshots

Front-end snapshot

node scripts/build_snapshot.mjs → public/data/active_franchises.json

Schedule snapshot (upcoming season)

python scripts/fetch_schedule_from_bref.py → LeagueSchedule25_26.csv

node scripts/build_schedule_snapshot.mjs → public/data/schedule_snapshot.json

Insight snapshots (players, games, teams)

python scripts/build_insights.py →
public/data/players_overview.json,
public/data/historic_games.json,
public/data/team_performance.json,
public/data/player_leaders.json,
public/data/player_season_insights.json

Team profile snapshot (map experience)

python scripts/build_team_profiles.py → public/data/team_profiles.json

Phase 1 — data plumbing

python scripts/phase1_pipeline.py

Outputs:

public/data/league_directory.json

public/data/historical_audit.json

Offline dev fixtures in scripts/testdata/.

Data dictionary conventions

Types: int whole numbers, float decimals, string UTF-8, date ISO-8601, enum constrained vocabulary.

Nulls: blanks represent NA; treat numeric blanks as missing.

Identifiers: personId, teamId, gameId are strings (preserve leading zeros).

Core datasets (storage notes)

Players.csv, Games.csv, TeamHistories.csv, LeagueSchedule24_25.csv live at repo root and are ≤ 25 MB.

PlayerStatistics.7z and TeamStatistics.zip produce larger CSVs; shard future commits:

PlayerStatistics/season=YYYY/part-*.csv

TeamStatistics/season=YYYY/part-*.csv

Each shard ≤ 25 MB.

Until sharding is complete, extract locally and consume monolithic CSVs in pipelines.

Contributor checklist

ruff check . and pytest for Python changes.

No top-level side effects in helper modules; keep scripts importable.

Never invent data. Always regenerate from pipeline + overrides.

Keep season framing explicit in all outputs.
